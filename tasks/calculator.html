<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Task Page with Dual Run</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #04153F;
      color: white;
    }

    .container {
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    .left,
    .right {
      width: 50%;
      padding: 20px;
      box-sizing: border-box;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .left-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }

    .left-tab-button {
      color: white;
      font-weight: bold;
      padding: 8px 16px;
      background-color: #1E006E;
      border: 1px solid #00FFE1;
      border-radius: 5px;
      cursor: pointer;
    }

    .left-tab-button.active {
      background-image: linear-gradient(145deg, #00FFF7, #6E00FF);
      color: #04153F;
    }

    .tab-content {
      background: #121E3A;
      padding: 15px;
      border-radius: 10px;
      display: none;
      color: #D1D5DB;
      line-height: 1.6;
      height: calc(100vh - 100px);
      overflow-y: auto;
    }

    .tab-content.active {
      display: block;
    }

    #output {
      padding: 0;
      background: none;
    }

    #output iframe {
      width: 100%;
      height: 100%;
      border: none;
      background: white;
      border-radius: 6px;
    }

    .right h3 {
      color: white;
    }

    .sec {
      height: 25px;
      margin-bottom: 10px;
      display: flex;
      gap: 5px;
    }

    .button {
      color: white;
      font-weight: bold;
      width: 110px;
      height: 31px;
      border: 1px solid gray;
      background: #1E006E;
      cursor: pointer;
      border-radius: 5px;
      transition: 0.3s;
      display: flex;
      align-items: center;  
      justify-content: center;
      gap: 5px;
    }

    .button img {
      height: 18px;
      width: 18px;
    }
    .button:hover {
      background-image: linear-gradient(145deg, #00FFF7, #6E00FF);
      border: 0;
    }

    .curr {
      border: 2px solid #00FFE1;
      background: #1E006E;
      color: #00FFE1;
    }

    .hide {
      display: none;
    }

    textarea {
      width: 95%;
      height: 65vh;
      padding: 10px;
      resize: none;
      border: 1px solid rgb(192, 188, 188);
      background-color: hsl(224, 82%, 12%);
      color: white;
      font-size: 1rem;
      font-family: monospace;
      border-radius: 6px;
      margin-bottom: 10px;
    }

    textarea::placeholder {
      color: white;
    }

     .copy{
      border: 1px solid gray;
      width: 80px;
      background-color: #1E006E;
      color: white;
      font-size: 16px;
      position: absolute;
      padding: 2px 5px 2px 5px;
      left: 40%;
      top: 17%;
      border-radius: 5px;
      cursor: pointer;
    }
.copy:hover{
  background: linear-gradient(145deg, #00FFF7, #6E00FF);
      color: white;
      border: none;
}

    .run {
      color: white;
      font-weight: bold;
      width: 140px;
      height: 35px;
      background: #1E006E;
      border-radius: 8px;
      border: 1px solid #00FFE1;
      cursor: pointer;
      margin-right: 10px;
    }

    .run:hover {
      background: linear-gradient(145deg, #00FFF7, #6E00FF);
      color: #04153F;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Left Panel -->
    <div class="left">
      <div class="left-tabs">
        <button class="left-tab-button active" onclick="showTab('description')">Description</button>
        <button class="left-tab-button" onclick="showTab('editorial')">Editorial</button>
      </div>

       <div id="description" class="tab-content active">
        <h2>Problem Statement</h2>
        <p><strong>Title:</strong> Print "Calculator"</p>
        <p><strong>Description:</strong><br/>You are required to create a basic calculator web application using HTML, CSS, and JavaScript that can perform simple arithmetic operations such as addition, subtraction, multiplication, and division, where users should be able to input numbers either through clicking buttons or using their keyboard, and see real-time updates to the result display in a clean and responsive interface without refreshing the page.</p>
        <center>
          <video autoplay loop muted width="60%" height="500px">
          <source src="./media/calculator.mp4" type="video/mp4">  
          </video>
        </center>
        <p><strong>Constraints:</strong></p>
        <ul>
          <li>Calculator must support the four basic arithmetic operations: +, -, Ã—, and Ã·.</li>
            <li>Inputs should be handled via on-screen buttons (keyboard support is optional).</li>
            <li>The calculator should display the full expression and result clearly.</li>

        </ul>
      </div>

      <div id="output" class="tab-content">
        <iframe id="user-output"></iframe>
      </div>

      <div id="editorial" class="tab-content">
        <div class="sec">
        <button class="html button curr" onclick="showHtml2()">
          <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg" alt="HTML Logo">HTML
        </button>
        <button class="css button" onclick="showCSS2()">
          <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/css3/css3-original.svg" alt="CSS Logo">CSS
        </button>
        <button class="js button" onclick="showJS2()">
          <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg" alt="JS Logo">JS
        </button>
      </div>
      <button class="copy"><i class="fa-solid fa-copy"></i> copy</button>
      <textarea id="html-code-2" placeholder="Write HTML here..." disabled>
        <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>
    <link rel="stylesheet" href="styles_2.css">
</head>
<body>
    <div class="container">
        <h1 id="title">Calculator</h1>
        <input id="ip" type="text" readonly>
        <div id="keys">
            <button class="btn">7</button>
            <button class="btn">8</button>
            <button class="btn">9</button>
            <button class="btn">+</button>
            <button class="btn">4</button>
            <button class="btn">5</button>
            <button class="btn">6</button>
            <button class="btn">-</button>
            <button class="btn">1</button>
            <button class="btn">2</button>
            <button class="btn">3</button>
            <button class="btn">x</button>
            <button class="btn">0</button>
            <button class="btn">.</button>
            <button class="btn">/</button>
            <button id="calculate">=</button>
            <button id="clr-btn">C</button>
            <button id="dlt-btn">Del</button>
            <button class="btn">^</button>
            <button class="btn">%</button>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
      </textarea>
      <textarea id="css-code-2" class="hide" placeholder="Write CSS here..." disabled>
        body{
    margin: 0;
    padding: 0;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
}

#title{
    text-align: center;
    padding-top: 30px;
    color:rgb(237, 165, 72);
    font-size: 50px;
    margin-bottom: 0;
    margin-top: 5px;
}

button{
    height: 70px;
    width: 70px;
    border-radius: 50%;
    color: white;
    background-color: gray;
    font-size: 25px;
    font-weight: bold;
    cursor: pointer;
    margin:5px 10px;
    border: none;
}

input{
    width: 88%;
    height: 70px;
    border: 4px solid gray;
    background-color: rgb(98, 190, 98);
    margin-bottom: 20px;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    font-size: 50px;
    padding-left: 20px;
    cursor:no-drop;
    overflow: scroll;
    margin: 15px;
}

.container{
    height: auto;
    width: 400px;
    display: block;
    grid-template-columns: repeat(4,1);
    align-items: center;
    justify-content: center;
    padding: 20px;
    background-color: black;
    border-radius: 20px;
}

#keys{
    display: flex;
    justify-content: space-around;
    align-items: center;
    flex-wrap: wrap;
}

button:hover{
    background-color: rgb(164, 163, 163);
    transform: translateY(-5px);
}

button:active{
    background-color: rgba(164, 163, 163,0.7);
}

#clr-btn, #dlt-btn{
    background-color: rgb(255, 140, 0);
}
      </textarea>
      <textarea id="js-code-2" class="hide" placeholder="Write JS here..." disabled>
        let ip = document.getElementById("ip");
        let btns = document.getElementsByClassName("btn");

        for (let i = 0; i < btns.length; i++) {
            btns[i].addEventListener('click', function() {
                curr = ip.value;
                if(curr!='Bad Input Buddy') {
                    curr += btns[i].innerText;
                }
                else {
                    curr = '';
                }
                ip.value = curr;
            });
        }

      document.getElementById("calculate").addEventListener('click', function() {
          try{
              ip.value = ip.value.replace('x','*');
              ip.value = ip.value.replace('^','');
              ip.value = eval(ip.value);
          }
          catch(e){
              ip.value = 'Bad Input Buddy';
          }
      });

      document.getElementById("clr-btn").addEventListener('click',function() {
          ip.value = '';
      });

      document.getElementById("dlt-btn").addEventListener('click',function() {
          ip.value = ip.value.slice(0, -1);
      });

    </textarea>

    </div>

  </div>

    <!-- Right Panel -->
   <div class="right">
      <h3>ðŸ›  Code Editor</h3>
      <div class="sec">
        <button class="html button curr" onclick="showHtml()">
          <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg" alt="HTML Logo">HTML
        </button>
        <button class="css button" onclick="showCSS()">
          <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/css3/css3-original.svg" alt="CSS Logo">CSS
        </button>
        <button class="js button" onclick="showJS()">
          <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg" alt="JS Logo">JS
        </button>
      </div>

      <textarea id="html-code" placeholder="Write HTML here..."></textarea>
      <textarea id="css-code" class="hide" placeholder="Write CSS here..."></textarea>
      <textarea id="js-code" class="hide" placeholder="Write JS here..."></textarea>

      <div>
        <button onclick="runInNewPage()" class="run">Run</button>
      </div>
    </div>
  </div>

  <script>
    let externalWindow = null;

    function showHtml() {
      document.getElementById("html-code").classList.remove("hide");
      document.getElementById("css-code").classList.add("hide");
      document.getElementById("js-code").classList.add("hide");

      const buttons = document.getElementsByClassName("button");
      buttons[3].classList.add("curr");
      buttons[4].classList.remove("curr");
      buttons[5].classList.remove("curr");
    }

    function showCSS() {
      document.getElementById("css-code").classList.remove("hide");
      document.getElementById("html-code").classList.add("hide");
      document.getElementById("js-code").classList.add("hide");

      const buttons = document.getElementsByClassName("button");
      buttons[4].classList.add("curr");
      buttons[3].classList.remove("curr");
      buttons[5].classList.remove("curr");
    }

    function showJS() {
      document.getElementById("js-code").classList.remove("hide");
      document.getElementById("css-code").classList.add("hide");
      document.getElementById("html-code").classList.add("hide");

      const buttons = document.getElementsByClassName("button");
      buttons[5].classList.add("curr");
      buttons[3].classList.remove("curr");
      buttons[4].classList.remove("curr");
    }

     function showHtml2() {
      document.getElementById("html-code-2").classList.remove("hide");
      document.getElementById("css-code-2").classList.add("hide");
      document.getElementById("js-code-2").classList.add("hide");

      const buttons = document.getElementsByClassName("button");
      buttons[0].classList.add("curr");
      buttons[1].classList.remove("curr");
      buttons[2].classList.remove("curr");
    }

    function showCSS2() {
      document.getElementById("css-code-2").classList.remove("hide");
      document.getElementById("html-code-2").classList.add("hide");
      document.getElementById("js-code-2").classList.add("hide");

      const buttons = document.getElementsByClassName("button");
      buttons[1].classList.add("curr");
      buttons[0].classList.remove("curr");
      buttons[2].classList.remove("curr");
    }

    function showJS2() {
      document.getElementById("js-code-2").classList.remove("hide");
      document.getElementById("css-code-2").classList.add("hide");
      document.getElementById("html-code-2").classList.add("hide");

      const buttons = document.getElementsByClassName("button");
      buttons[2].classList.add("curr");
      buttons[0].classList.remove("curr");
      buttons[1].classList.remove("curr");
    }

    function buildUserCode() {
      const html = document.getElementById("html-code").value;
      const css = document.getElementById("css-code").value;
      const js = document.getElementById("js-code").value;

      return `
        <!DOCTYPE html>
        <html>
        <head>
          <style>${css}</style>
        </head>
        <body>
          ${html}
          <script>${js.replace(/<\/script>/g, "<\\/script>")}<\/script>
        </body>
        </html>
      `;
    }

   

    function runInNewPage() {
      const userCode = buildUserCode();
      externalWindow = window.open();
      if (externalWindow) {
        externalWindow.document.open();
        externalWindow.document.write(userCode);
        externalWindow.document.close();
      } else {
        alert("Popup blocked! Please allow popups for this site.");
      }
    }

    function showTab(tabId) {
      const contents = document.querySelectorAll('.tab-content');
      const buttons = document.querySelectorAll('.left-tab-button');
      contents.forEach(c => c.classList.remove('active'));
      buttons.forEach(b => b.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      event.target.classList.add('active');
    }
  </script>
</body>
</html>
